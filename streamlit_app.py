import streamlit as st
import base64
from pathlib import Path

# --- 1. í˜ì´ì§€ ê¸°ë³¸ ì„¤ì • ---
# ì´ ì„¤ì •ì€ ì•±ì˜ ëª¨ë“  í˜ì´ì§€ì— ì ìš©ë©ë‹ˆë‹¤. (ê°€ì¥ ë¨¼ì € í˜¸ì¶œë˜ì–´ì•¼ í•¨)
st.set_page_config(
    page_title="ì¸í„°ë™í‹°ë¸Œ ìƒíƒœê³„ êµì‹¤",
    page_icon="ğŸŒ³",
    layout="wide",
)

# --- 2. ì „ì—­ í•œê¸€ í°íŠ¸ ì ìš© í•¨ìˆ˜ ---
# CSSë¥¼ ì£¼ì…í•˜ì—¬ Streamlitì˜ ëª¨ë“  UI ìš”ì†Œ(ì œëª©, í…ìŠ¤íŠ¸, ë²„íŠ¼ ë“±)ì—
# ë‚˜ëˆ”ê³ ë”• í°íŠ¸ë¥¼ ì ìš©í•©ë‹ˆë‹¤.
# (Matplotlib ê·¸ë˜í”„ í°íŠ¸ì™€ëŠ” ë³„ê°œë¡œ UI ìì²´ì˜ í°íŠ¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.)

def inject_nanum_font():
    """
    ë¡œì»¬ fonts/NanumGothic.ttfë¥¼ base64ë¡œ ì¸ë¼ì¸ ì„ë² ë“œí•˜ì—¬
    Streamlit í˜ì´ì§€ì˜ ëª¨ë“  í…ìŠ¤íŠ¸ì— ì ìš©í•©ë‹ˆë‹¤.
    """
    # í°íŠ¸ ê²½ë¡œ ì„¤ì • (main_app.pyëŠ” fonts í´ë”ì™€ ê°™ì€ ë ˆë²¨ì— ìˆë‹¤ê³  ê°€ì •)
    font_path = Path(__file__).parent / "fonts" / "NanumGothic.ttf"
    
    if not font_path.exists():
        st.warning(f"í°íŠ¸ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {font_path}")
        st.warning("UIì˜ í•œê¸€ í°íŠ¸ê°€ ê¹¨ì ¸ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.")
        return

    try:
        # í°íŠ¸ íŒŒì¼ì„ base64ë¡œ ì¸ì½”ë”©
        b64 = base64.b64encode(font_path.read_bytes()).decode("utf-8")
        
        # CSS ìŠ¤íƒ€ì¼ ì •ì˜
        css = f"""
        <style>
        @font-face {{
            font-family: 'NanumGothicLocal';
            src: url('data:font/ttf;base64,{b64}') format('truetype');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }}
        
        /* Streamlitì˜ ëª¨ë“  UI ìš”ì†Œì— í°íŠ¸ ì ìš© */
        html, body, .stApp, [class*="css"] {{
            font-family: 'NanumGothicLocal', 'NanumGothic', sans-serif !important;
        }}
        
        /* í—¤ë”, ë§ˆí¬ë‹¤ìš´ í…ìŠ¤íŠ¸ ë“±ì—ë„ ëª…ì‹œì ìœ¼ë¡œ ì ìš© */
        h1, h2, h3, h4, h5, h6, .stMarkdown {{
            font-family: 'NanumGothicLocal', 'NanumGothic', sans-serif !important;
        }}
        </style>
        """
        # CSS ì£¼ì…
        st.markdown(css, unsafe_allow_html=True)
    
    except Exception as e:
        st.error(f"í°íŠ¸ ì£¼ì… ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}")

# --- 3. ë©”ì¸ í˜ì´ì§€ UI ---

def main_home_page():
    
    # 1. í°íŠ¸ ì£¼ì… ì‹¤í–‰
    inject_nanum_font()

    # 2. ë©”ì¸ íƒ€ì´í‹€ ë° ì†Œê°œ
    st.title("ğŸŒ³ ì‚´ì•„ìˆëŠ” ìƒíƒœê³„ í•™ìŠµ êµì‹¤ ğŸ‘©â€ğŸ”¬")
    st.markdown("---")
    
    st.header("ì´ ì›¹ì•±ì€ ìƒíƒœê³„ì˜ êµ¬ì„± ìš”ì†Œì™€ ì•ˆì •ì„±ì„ ì²´í—˜í•˜ë©° ë°°ìš°ëŠ” ì¸í„°ë™í‹°ë¸Œ í•™ìŠµ ë„êµ¬ì…ë‹ˆë‹¤.")
    
    st.info(
        """
        **ğŸ‘ˆ ì™¼ìª½ ì‚¬ì´ë“œë°”ì—ì„œ í•™ìŠµí•  í˜ì´ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”!**
        
        1.  **[1. ë¨¹ì´ ê´€ê³„ ëª¨í˜• ë§Œë“¤ê¸°]**: ì§ì ‘ ìƒë¬¼ ì¹´ë“œë¥¼ ê³¨ë¼ ë‚˜ë§Œì˜ ë¨¹ì´ê·¸ë¬¼ì„ ë§Œë“¤ì–´ë´…ë‹ˆë‹¤.
        2.  **[2. ìƒíƒœê³„ ì•ˆì •ì„± ì‹¤í—˜]**: ë§Œë“  ë¨¹ì´ê·¸ë¬¼ì— ì¶©ê²©ì„ ì£¼ì–´ ìƒíƒœ í”¼ë¼ë¯¸ë“œê°€ ì–´ë–»ê²Œ ë³€í•˜ëŠ”ì§€ ì‹¤í—˜í•©ë‹ˆë‹¤.
        3.  **[3. ëª¨í˜• ì™„ì„± í™•ì¸ ë° í€´ì¦ˆ]**: ì™„ì„±ëœ ëª¨í˜•ì˜ ë³µì¡ë„ë¥¼ í™•ì¸í•˜ê³ , í•µì‹¬ ê°œë… í€´ì¦ˆë¥¼ í’€ì–´ë´…ë‹ˆë‹¤.
        """
    )
    
    st.markdown("---")

    # 3. ì•± êµ¬ì¡° ì•ˆë‚´
    col1, col2 = st.columns(2)
    
    with col1:
        st.subheader("ğŸ¯ í•™ìŠµ ëª©í‘œ")
        st.markdown(
            """
            - ìƒë¬¼ê³¼ ë¹„ìƒë¬¼ ìš”ì†Œë¥¼ êµ¬ë¶„í•˜ê³ , ìƒíƒœê³„ êµ¬ì„± ìš”ì†Œë¥¼ ì´í•´í•©ë‹ˆë‹¤.
            - ë¨¹ì´ì‚¬ìŠ¬ê³¼ ë¨¹ì´ê·¸ë¬¼ì˜ ê´€ê³„ë¥¼ íŒŒì•…í•©ë‹ˆë‹¤.
            - ìƒíƒœ í”¼ë¼ë¯¸ë“œì˜ ê°œë…ì„ ì´í•´í•©ë‹ˆë‹¤.
            - **ë¨¹ì´ê·¸ë¬¼ì´ ë³µì¡í• ìˆ˜ë¡ ìƒíƒœê³„ê°€ ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€ë¨**ì„ ì‹¤í—˜ì„ í†µí•´ ê¹¨ë‹«ìŠµë‹ˆë‹¤.
            """
        )

    with col2:
        st.subheader("ğŸ“‚ ì•± íŒŒì¼ êµ¬ì¡° (ê¶Œì¥)")
        st.code(
            """
(í”„ë¡œì íŠ¸ í´ë”)/
â”œâ”€â”€ ğŸ  streamlit_app.py
â”‚
â”œâ”€â”€ ğŸ“ pages/
â”‚   â”œâ”€â”€ ğŸ“„ 1_ë¨¹ì´ê´€ê³„_ëª¨í˜•.py (page 1 ì½”ë“œ)
â”‚   â”œâ”€â”€ ğŸ“„ 2_ìƒíƒœê³„_ì•ˆì •ì„±_ì‹¤í—˜.py (page 2 ì½”ë“œ)
â”‚   â””â”€â”€ ğŸ“„ 3_ê°œë…_í€´ì¦ˆ.py (page 3 ì½”ë“œ)
â”‚
â””â”€â”€ ğŸ“ fonts/
    â””â”€â”€ ğŸ“„ NanumGothic.ttf (í•œê¸€ í°íŠ¸ íŒŒì¼)
            """,
            language="bash"
        )
        st.caption("â€» `pages` í´ë” ì•ˆì˜ íŒŒì¼ ì´ë¦„ì´ ì‚¬ì´ë“œë°”ì— í‘œì‹œë©ë‹ˆë‹¤.")

# --- 4. ì•± ì‹¤í–‰ ---
if __name__ == "__main__":
    main_home_page()